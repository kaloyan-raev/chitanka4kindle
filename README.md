Читанка за Kindle
=================

[![Build Status](https://travis-ci.org/kaloyan-raev/chitanka4kindle.svg?branch=master)](https://travis-ci.org/kaloyan-raev/chitanka4kindle)

Приложение за електронния четец Kindle, което позволява да се разглежда каталога на [Читанка](http://chitanka.info/) и да се свалят книги директно на устройството без помощта на компютър и кабел.

Връзката между електронния четец и сайта на Читанка се осъществява през Wi-Fi.

Приложението работи само на Kindle 3 и 4. Не работи на Kindle Paperwhite.

[![Читанка за Kindle](http://img.youtube.com/vi/Ym1GvY1qjwg/0.jpg)](http://www.youtube.com/watch?v=Ym1GvY1qjwg)

Функционалност
==============

Към момента приложението предоставя следните възможности:
* Стартиране на приложението от главния екран на Kindle
* Разглеждане на каталога на Читанка: по автори, категории, поредици и т.н.
* Сваляне на избраната книга директно на Kindle в MOBI формат, т.е. не се налага допълнително конвертиране

В следващите версии може да се очаква:
* Търсене на книги по ключови думи
* По-изчерпателна информация за разглежданите книги
* Подобрена навигация в каталога

Инсталация
==========

За разлика от други устройства, четецът Kindle е от затворен тип и е предвидено софтуерът му да се обновява и надгражда единствено от Amazon. За щастие е открит начин да се заобиколи тази забрана. За целта е необходимо устройството да се подготви чрез изпълнение на няколко трика. Това е относително сложен процес, за който са необходими известни технологични познания, време и желание. Ако не се чувствате уверен да изпълните инструкциите, най-добре помолете за помощ някой познат с нужните технологични познания. 

Към настоящия момент следващите инструкции са тествани успешно от автора на проекта единствено на Kindle 3 Wi-Fi. Потребители на Kindle 4 също съобщават за успешна инсталация. Приложението **не работи** на моделите Kindle Paperwhite. Тези модели не разполагат с хардуерни бутони, навигацията е изцяло с докосвания, програмният интерфейс също е значително променен и се налага създаване на напълно ново приложение.

В случай на затруднения, моля [отворете проблем](https://github.com/kaloyan-raev/chitanka4kindle/issues/new) към проекта.

Подготовка на четеца
--------------------

За да изпълните триковете, описани по-долу, е необходимо да разполагате с компютър и USB кабел, с който да го свържете към четеца. Някои от триковете е по-лесно да се изпълнят, ако операционната система на компютъра е Linux или MacOS, но е напълно възможно това да се постигне и с Windows.

### 1. Отключване (jailbreak)

Тази първа стъпка позволява инсталирането на софтуер, който не е разработен от производителя на устройството. Отключването е абсолютно необходимо за успешното изпълнение на следващите трикове.

Следвайте [тези инструкции](http://www.mobileread.com/forums/showthread.php?t=88004).

### 2. Инсталиране на USBnetwork

USBnetwork прави възможно свързването на компютър към Kindle през протокола SSH, използвайки USB кабела. Това позволява копирането и модифицирането на системни файлове на четеца. Необходимо е за успешното изпълнение на следващите два трика.

Следвайте [тези инструкции](http://www.mobileread.com/forums/showthread.php?t=88004).

### 3. Копиране на developer keystore

Kindle е "имунизиран" да отхвърля всеки софтуер, който не е разработен или разпространен от производителя. Копирането на developer keystore позволява на Kindle да стартира софтуер, който е подписан със специален електронен подпис. Читанка за Kindle е подписан именно с такъв електронен подпис.

Необходимо е да използвате USBnetwork. Следвайте [тези инструкции](http://www.mobileread.com/forums/showthread.php?t=152294).

### 4. Добавяне на разрешение за изпълняване на скриптове

Читанка за Kindle сваля избраната книга във флаш паметта на устройството. За да се появи книгата на главния екран на Kindle, е необходимо приложението да изпълни специален скрипт. Настойките по подразбиране забраняват изпълнението на такива скриптове. Затова е нужно да се добави съответното разрешение.

Използвайки USBNetwork, редактирайте файла /opt/amazon/ebook/security/external.policy. В секцията `grant signedBy "Kindlet"` добавете следния ред:

`permission java.io.FilePermission "<<ALL FILES>>", "execute";`

### 5. Кирилизация на клавиатурата

За момента тази стъпка не е необходима, но тя ще стане важна, когато някоя от следващите версии на Читанка за Kindle предостави възможност за търсене на книги по ключова дума. Ключовите думи трябва да са въведени на кирилица и затова е необходимо да се инсталира този трик. 

Следвайте [тези инструкции](http://forum.myebook.bg/index.php?topic=131.0).

Инсталиране на приложението
---------------------------

За да инсталирате приложението, е необходимо да разполагате с компютър и USB кабел. Инсталирането на приложението е подобно на качване на книга от компютър на Kindle.

1. Използвайте компютъра, за да свалите файла chitanka.azw2 от [последната версия](https://github.com/kaloyan-raev/chitanka4kindle/releases/latest) на приложението.
2. Свържете Kindle към компютъра чрез USB кабела. Изчакайте Kindle да се разпознае като USB диск на компютъра.
3. Копирайте файла chitanka.azw2 в папката documents на Kindle.
4. Извадете USB кабела от компютъра. Изчакайте Kindle да премине в нормален режим на работа.
5. Приложението "Читанка" ще се появи най-горе в главния екран на Kindle.

Обновяване на приложението
--------------------------

Обновяването се извършва по същия начин като инсталирането. Свалете новата версия на файла chitanka.azw2 и го копирайте в папката documents на Kindle като го запишете върху старата версия на файла.

Лиценз
======

Читанка за Kindle е безплатен и свободен софтуер. Разпространява се под лиценза GNU General Public License, версия 3. Пълният текст на лиценза може да видите във файла [LICENSE](https://github.com/kaloyan-raev/chitanka4kindle/blob/master/LICENSE).
